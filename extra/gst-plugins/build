#!/bin/sh -e

export DESTDIR="$1"

(cd libav

meson setup \
	-Dprefix=/usr \
	-Dbuildtype=release \
	-Ddoc=disabled \
	-Dtests=disabled \
	-Db_colorout=never \
	output

ninja -C output
ninja -C output install)

(cd ugly

meson setup \
	-Dprefix=/usr \
	-Dbuildtype=release \
	-Ddoc=disabled \
	-Dtests=disabled \
	-Dnls=disabled \
	-Db_colorout=never \
	output

ninja -C output
ninja -C output install)

(cd good

meson setup \
	-Dprefix=/usr \
	-Dbuildtype=release \
	-Ddoc=disabled \
	-Dtests=disabled \
	-Dnls=disabled \
	-Db_colorout=never \
	-Dexamples=disabled \
	-Dhls-crypto=openssl \
	output

ninja -C output
ninja -C output install)

(cd bad

meson setup \
	-Dprefix=/usr \
	-Dbuildtype=release \
	-Ddoc=disabled \
	-Dtests=disabled \
	-Dnls=disabled \
	-Db_colorout=never \
	-Dexamples=disabled \
	-Dhls=enabled \
	-Dhls-crypto=openssl \
	output

ninja -C output
ninja -C output install)
