diff --git a/vendor/libssh2-sys/libssh2/src/openssl.h b/vendor/libssh2-sys/libssh2/src/openssl.h
index 658b040..135450e 100644
--- a/vendor/libssh2-sys/libssh2/src/openssl.h
+++ b/vendor/libssh2-sys/libssh2/src/openssl.h
@@ -57,8 +57,8 @@
 #include <openssl/pem.h>
 #include <openssl/rand.h>
 
-#if OPENSSL_VERSION_NUMBER >= 0x10100000L && \
-    !defined(LIBRESSL_VERSION_NUMBER)
+#if OPENSSL_VERSION_NUMBER >= 0x10100000L || \
+    LIBRESSL_VERSION_NUMBER >= 0x3050000fL
 # define HAVE_OPAQUE_STRUCTS 1
 #endif
 
diff --git a/vendor/openssl-sys/build/main.rs b/vendor/openssl-sys/build/main.rs
index 243f146..1f4da08 100644
--- a/vendor/openssl-sys/build/main.rs
+++ b/vendor/openssl-sys/build/main.rs
@@ -254,6 +254,7 @@ See rust-openssl README for more information:
             (3, 3, _) => ('3', '3', 'x'),
             (3, 4, 0) => ('3', '4', '0'),
             (3, 4, _) => ('3', '4', 'x'),
+            (3, 5, _) => ('3', '5', 'x'),
             _ => version_error(),
         };
 
@@ -296,7 +297,7 @@ fn version_error() -> ! {
         "
 
 This crate is only compatible with OpenSSL (version 1.0.1 through 1.1.1, or 3.0.0), or LibreSSL 2.5
-through 3.4.1, but a different version of OpenSSL was found. The build is now aborting
+through 3.5.3, but a different version of OpenSSL was found. The build is now aborting
 due to this version mismatch.
 
 "
